<% /* Layout y datos se pasan desde Express con express-ejs-layouts */ %>

<!-- Events Header -->
<section class="bg-gradient-to-r from-blue-600 to-purple-600 py-20">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center text-white" data-aos="fade-up">
            <h1 class="text-4xl md:text-6xl font-bold mb-6">Descubre Eventos</h1>
            <p class="text-xl md:text-2xl opacity-90 max-w-3xl mx-auto mb-8">
                Encuentra eventos que se alineen con tus intereses y objetivos profesionales
            </p>
            
            <!-- Search Bar -->
            <div class="max-w-2xl mx-auto" data-aos="fade-up" data-aos-delay="200">
                <div class="relative">
                    <input 
                        type="text" 
                        id="searchInput"
                        placeholder="Buscar eventos, categorías, ubicaciones..."
                        class="w-full px-6 py-4 rounded-2xl text-gray-900 text-lg focus:outline-none focus:ring-4 focus:ring-white/30 shadow-2xl"
                    >
                    <button id="searchBtn" class="absolute right-2 top-2 bg-blue-600 text-white px-6 py-2 rounded-xl hover:bg-blue-700 transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Filters Section -->
<section class="py-8 bg-white border-b border-gray-200">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex flex-wrap items-center justify-between gap-4" data-aos="fade-up">
            <!-- Category Filters -->
            <div class="flex flex-wrap gap-2">
                <button class="filter-btn active px-4 py-2 bg-blue-600 text-white rounded-full text-sm font-medium" data-category="all">
                    Todos
                </button>
                <button class="filter-btn px-4 py-2 bg-gray-100 text-gray-700 rounded-full text-sm font-medium hover:bg-gray-200 transition-colors" data-category="Conferencia">
                    Conferencias
                </button>
                <button class="filter-btn px-4 py-2 bg-gray-100 text-gray-700 rounded-full text-sm font-medium hover:bg-gray-200 transition-colors" data-category="Networking">
                    Networking
                </button>
                <button class="filter-btn px-4 py-2 bg-gray-100 text-gray-700 rounded-full text-sm font-medium hover:bg-gray-200 transition-colors" data-category="Workshop">
                    Workshops
                </button>
                <button class="filter-btn px-4 py-2 bg-gray-100 text-gray-700 rounded-full text-sm font-medium hover:bg-gray-200 transition-colors" data-category="Arte">
                    Arte
                </button>
                <button class="filter-btn px-4 py-2 bg-gray-100 text-gray-700 rounded-full text-sm font-medium hover:bg-gray-200 transition-colors" data-category="Música">
                    Música
                </button>
                <button class="filter-btn px-4 py-2 bg-gray-100 text-gray-700 rounded-full text-sm font-medium hover:bg-gray-200 transition-colors" data-category="Marketing">
                    Marketing
                </button>
            </div>
            
            <!-- Sort Options -->
            <div class="flex items-center gap-4">
                <select class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <option>Ordenar por fecha</option>
                    <option>Ordenar por popularidad</option>
                    <option>Ordenar por precio</option>
                </select>
                
                <!-- View Toggle -->
                <div class="flex border border-gray-300 rounded-lg overflow-hidden">
                    <button class="px-3 py-2 bg-blue-600 text-white">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path>
                        </svg>
                    </button>
                    <button class="px-3 py-2 bg-gray-100 text-gray-600 hover:bg-gray-200">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Events Grid -->
<section class="py-12 bg-gray-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Events Count -->
        <div class="mb-8" data-aos="fade-up">
            <h2 class="text-2xl font-bold text-gray-900 mb-2">
                Eventos Disponibles 
                <span id="eventsCount" class="text-blue-600 text-lg">(6)</span>
            </h2>
        </div>
        
        <!-- Events Grid -->
        <div id="eventsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            <!-- Event 1 -->
            <div class="event-card" data-title="Conferencia Anual de Innovación" data-category="Conferencia" data-location="Centro de Convenciones" data-description="Únete a los líderes de la industria para discutir las últimas tendencias en tecnología e innovación" data-aos="fade-up" data-aos-delay="100">
                <%- include('../components/card', {
                    title: 'Conferencia Anual de Innovación',
                    description: 'Únete a los líderes de la industria para discutir las últimas tendencias en tecnología e innovación. Un evento imperdible para profesionales del sector.',
                    image: 'https://images.unsplash.com/photo-1540575467063-178a50c2df87?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80',
                    date: '20 de Julio, 2024',
                    location: 'Centro de Convenciones',
                    category: 'Conferencia',
                    participants: '250',
                    eventId: '1'
                }) %>
            </div>
            
            <!-- Event 2 -->
            <div class="event-card" data-title="Meetup de Startups" data-category="Networking" data-location="Coworking Space" data-description="Networking y presentaciones de las startups más prometedoras del ecosistema local" data-aos="fade-up" data-aos-delay="200">
                <%- include('../components/card', {
                    title: 'Meetup de Startups',
                    description: 'Networking y presentaciones de las startups más prometedoras del ecosistema local. Perfecto para emprendedores y inversores.',
                    image: 'https://images.unsplash.com/photo-1511795409834-ef04bbd61622?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80',
                    date: '25 de Julio, 2024',
                    location: 'Coworking Space',
                    category: 'Networking',
                    participants: '80',
                    eventId: '2'
                }) %>
            </div>
            
            <!-- Event 3 -->
            <div class="event-card" data-title="Workshop de Diseño UX/UI" data-category="Workshop" data-location="Estudio de Diseño" data-description="Aprende las mejores prácticas en diseño de experiencia de usuario con expertos" data-aos="fade-up" data-aos-delay="300">
                <%- include('../components/card', {
                    title: 'Workshop de Diseño UX/UI',
                    description: 'Aprende las mejores prácticas en diseño de experiencia de usuario con expertos de la industria.',
                    image: 'https://images.unsplash.com/photo-1558655146-d09347e92766?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80',
                    date: '1 de Agosto, 2024',
                    location: 'Estudio de Diseño',
                    category: 'Workshop',
                    participants: '30',
                    eventId: '3'
                }) %>
            </div>
            
            <!-- Event 4 -->
            <div class="event-card" data-title="Exposición de Arte Digital" data-category="Arte" data-location="Museo de Arte" data-description="Explora las fronteras del arte y la tecnología en esta exposición inmersiva" data-aos="fade-up" data-aos-delay="400">
                <%- include('../components/card', {
                    title: 'Exposición de Arte Digital',
                    description: 'Explora las fronteras del arte y la tecnología en esta exposición inmersiva con artistas internacionales.',
                    image: 'https://images.unsplash.com/photo-1541961017774-22349e4a1262?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80',
                    date: '5 de Agosto, 2024',
                    location: 'Museo de Arte',
                    category: 'Arte',
                    participants: '120',
                    eventId: '4'
                }) %>
            </div>
            
            <!-- Event 5 -->
            <div class="event-card" data-title="Festival de Música Indie" data-category="Música" data-location="Parque Central" data-description="Disfruta de una noche llena de música indie con artistas emergentes" data-aos="fade-up" data-aos-delay="500">
                <%- include('../components/card', {
                    title: 'Festival de Música Indie',
                    description: 'Disfruta de una noche llena de música indie con artistas emergentes y establecidos del panorama local.',
                    image: 'https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80',
                    date: '15 de Agosto, 2024',
                    location: 'Parque Central',
                    category: 'Música',
                    participants: '500',
                    eventId: '5'
                }) %>
            </div>
            
            <!-- Event 6 -->
            <div class="event-card" data-title="Seminario de Marketing Digital" data-category="Marketing" data-location="Centro de Negocios" data-description="Domina las estrategias de marketing digital más efectivas" data-aos="fade-up" data-aos-delay="600">
                <%- include('../components/card', {
                    title: 'Seminario de Marketing Digital',
                    description: 'Domina las estrategias de marketing digital más efectivas con casos de estudio reales y herramientas prácticas.',
                    image: 'https://images.unsplash.com/photo-1460925895917-afdab827c52f?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80',
                    date: '20 de Agosto, 2024',
                    location: 'Centro de Negocios',
                    category: 'Marketing',
                    participants: '150',
                    eventId: '6'
                }) %>
            </div>
        </div>
        
        <!-- Load More Button -->
        <div class="text-center mt-12" data-aos="fade-up" data-aos-delay="700">
            <button class="bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-3 rounded-xl font-semibold hover:from-blue-700 hover:to-purple-700 transform hover:scale-105 transition-all duration-300 shadow-lg hover:shadow-xl">
                Cargar Más Eventos
            </button>
        </div>
    </div>
</section>

<!-- Featured Categories -->
<section class="py-20 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-16" data-aos="fade-up">
            <h2 class="text-4xl font-bold text-gray-900 mb-4">Categorías Populares</h2>
            <p class="text-xl text-gray-600 max-w-2xl mx-auto">
                Explora eventos por categoría y encuentra lo que más te interesa
            </p>
        </div>
        
        <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
            <!-- Category 1 -->
            <div class="group cursor-pointer" data-aos="fade-up" data-aos-delay="100">
                <div class="bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl p-8 text-white text-center hover:from-blue-600 hover:to-blue-700 transition-all duration-300 transform hover:scale-105">
                    <div class="w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center mx-auto mb-4">
                        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                        </svg>
                    </div>
                    <h3 class="text-lg font-bold mb-2">Tecnología</h3>
                    <p class="text-sm opacity-90">45 eventos</p>
                </div>
            </div>
            
            <!-- Category 2 -->
            <div class="group cursor-pointer" data-aos="fade-up" data-aos-delay="200">
                <div class="bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl p-8 text-white text-center hover:from-purple-600 hover:to-purple-700 transition-all duration-300 transform hover:scale-105">
                    <div class="w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center mx-auto mb-4">
                        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                        </svg>
                    </div>
                    <h3 class="text-lg font-bold mb-2">Networking</h3>
                    <p class="text-sm opacity-90">32 eventos</p>
                </div>
            </div>
            
            <!-- Category 3 -->
            <div class="group cursor-pointer" data-aos="fade-up" data-aos-delay="300">
                <div class="bg-gradient-to-br from-green-500 to-green-600 rounded-2xl p-8 text-white text-center hover:from-green-600 hover:to-green-700 transition-all duration-300 transform hover:scale-105">
                    <div class="w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center mx-auto mb-4">
                        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                        </svg>
                    </div>
                    <h3 class="text-lg font-bold mb-2">Educación</h3>
                    <p class="text-sm opacity-90">28 eventos</p>
                </div>
            </div>
            
            <!-- Category 4 -->
            <div class="group cursor-pointer" data-aos="fade-up" data-aos-delay="400">
                <div class="bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl p-8 text-white text-center hover:from-orange-600 hover:to-orange-700 transition-all duration-300 transform hover:scale-105">
                    <div class="w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center mx-auto mb-4">
                        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2m0 0V1a1 1 0 011-1h2a1 1 0 011 1v18a1 1 0 01-1 1H4a1 1 0 01-1-1V4a1 1 0 011-1h2a1 1 0 011 1v3m0 0h8m-8 0H5a1 1 0 00-1 1v12a1 1 0 001 1h14a1 1 0 001-1V6a1 1 0 00-1-1h-2M9 8h6m-6 4h6m-6 4h6"></path>
                        </svg>
                    </div>
                    <h3 class="text-lg font-bold mb-2">Arte</h3>
                    <p class="text-sm opacity-90">19 eventos</p>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const searchInput = document.getElementById('searchInput');
        const searchBtn = document.getElementById('searchBtn');
        const filterButtons = document.querySelectorAll('.filter-btn');
        const eventCards = document.querySelectorAll('.event-card');
        const eventsCount = document.getElementById('eventsCount');
        
        let currentCategory = 'all';
        let currentSearchTerm = '';

        // Función para filtrar eventos
        function filterEvents() {
            let visibleCount = 0;
            
            eventCards.forEach(card => {
                const title = card.dataset.title.toLowerCase();
                const category = card.dataset.category;
                const location = card.dataset.location.toLowerCase();
                const description = card.dataset.description.toLowerCase();
                
                // Verificar filtro de categoría
                const categoryMatch = currentCategory === 'all' || category === currentCategory;
                
                // Verificar búsqueda
                const searchMatch = currentSearchTerm === '' || 
                    title.includes(currentSearchTerm) || 
                    location.includes(currentSearchTerm) || 
                    description.includes(currentSearchTerm) ||
                    category.toLowerCase().includes(currentSearchTerm);
                
                // Mostrar u ocultar según los filtros
                if (categoryMatch && searchMatch) {
                    card.style.display = 'block';
                    card.style.opacity = '0';
                    setTimeout(() => {
                        card.style.transition = 'opacity 0.3s ease-in';
                        card.style.opacity = '1';
                    }, 10);
                    visibleCount++;
                } else {
                    card.style.display = 'none';
                }
            });
            
            // Actualizar contador
            eventsCount.textContent = `(${visibleCount})`;
            
            // Si no hay resultados, mostrar mensaje
            const eventsGrid = document.getElementById('eventsGrid');
            if (visibleCount === 0) {
                if (!document.getElementById('noResults')) {
                    const noResults = document.createElement('div');
                    noResults.id = 'noResults';
                    noResults.className = 'col-span-full text-center py-12';
                    noResults.innerHTML = `
                        <svg class="w-16 h-16 mx-auto text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <p class="text-xl font-semibold text-gray-700 mb-2">No se encontraron eventos</p>
                        <p class="text-gray-500">Intenta con otros términos de búsqueda o selecciona otra categoría</p>
                    `;
                    eventsGrid.appendChild(noResults);
                }
            } else {
                const noResults = document.getElementById('noResults');
                if (noResults) {
                    noResults.remove();
                }
            }
        }

        // Búsqueda en tiempo real
        if (searchInput) {
            searchInput.addEventListener('input', function() {
                currentSearchTerm = this.value.toLowerCase().trim();
                filterEvents();
            });

            // Búsqueda al hacer clic en el botón
            if (searchBtn) {
                searchBtn.addEventListener('click', function() {
                    currentSearchTerm = searchInput.value.toLowerCase().trim();
                    filterEvents();
                });
            }

            // Búsqueda al presionar Enter
            searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    currentSearchTerm = this.value.toLowerCase().trim();
                    filterEvents();
                }
            });
        }

        // Filtros de categoría
        filterButtons.forEach(button => {
            button.addEventListener('click', function() {
                // Remover clase active de todos los botones
                filterButtons.forEach(btn => {
                    btn.classList.remove('active', 'bg-blue-600', 'text-white');
                    btn.classList.add('bg-gray-100', 'text-gray-700');
                });
                
                // Agregar clase active al botón clickeado
                this.classList.add('active', 'bg-blue-600', 'text-white');
                this.classList.remove('bg-gray-100', 'text-gray-700');
                
                // Actualizar categoría actual
                currentCategory = this.dataset.category || 'all';
                filterEvents();
            });
        });

        // Inicializar
        filterEvents();
    });
</script>
